<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
    
<mapper namespace="member">
	<insert id="insertMember">
		insert into employee values(seq_emp_id.nextval, #{empName}, #{empNo}, #{email}
		,#{phone}, #{deptCode},#{jobCode},sysdate,null,#{quitYn},#{password})
	</insert>
	
	<select id="selectDeptList" resultMap="selectList">
		select * from department	
	</select>
	<select id="selectJobList" resultMap="selectList">
		select * from job	
	</select>
	
	<resultMap id="selectList" type="Map">
	</resultMap>
	<select  id="memberSelectList" resultMap="selectListMember">
		select * from employee
	</select>
	
	<resultMap id="selectListMember" type="member"></resultMap>
	
	<select id="selectOneMember" resultType="member">
		select * from employee where email=#{email}
	</select>
	
	<update id="updatePassword">
		update employee set password=#{password} where email=#{email}
	</update>
	
	<select id="selectOneJob" resultType="Map">
		select job_name from job where job_code=(select job_code from employee where email=#{email})
	</select>
	
	<select id="selectOneDept" resultType="Map">
		select dept_title from department where dept_id=(select dept_code from employee where email=#{email})
	</select>
</mapper>